[
  {
    "date": "2024.3.5",
    "content": [
      "link--https://github.com/tailwindlabs/tailwindcss/discussions/5258--解决一个小问题：使用 @apply 时会报 Unknown at rule @apply。解决方法来自GitHub",
      "utils.js 新增 sleep 函数",
      "并整理了一下 utils.js"
    ]
  },
  {
    "date": "2024.3.6",
    "content": [
      "开发 dapai",
      "新增修改昵称和中途加入功能"
    ]
  },
  {
    "date": "2024.3.7",
    "content": [
      "开发 dapai",
      "增加非常丝滑的动画",
      "增加退出功能",
      {
        "name": "修复若干问题",
        "info": [
          "其中改名逻辑：用v-band 和 @input 替换掉了原来的 v-model",
          "player 组件的点击事件采用捕获方式：@click.capture",
          "新增玩家 id 改用时间戳",
          "改善了一些判定问题"
        ]
      }
    ]
  },
  {
    "date": "2024.3.11",
    "content": [
      "dapai完工",
      "完成支出，通吃逻辑",
      "新增历史记录，其中改名的历史记录大费周章",
      "增加响应式布局",
      "入口在其他里头"
    ]
  },
  {
    "date": "2024.3.15",
    "content": [
      "新增自定义指令：v-slide-in，元素移入视口时播放动画",
      "loading 页面长时间停留直接跳 404",
      "首页动画优化，背景图片重置"
    ]
  },
  {
    "date": "2024.3.16",
    "content": [
      "增加预加载 icon，DOM 加载完之后，花十秒来预加载页面用到的所有图标",
      "link--https://cn.vitejs.dev/guide/features#glob-import--vite-glob导入",
      "link--https://juejin.cn/post/7298332581354881034--Vite + Vue 中 img 动态设置 src",
      "楼上两位大功臣",
      "就这玩意花了我一下午试错",
      {
        "name": "原因：",
        "info": [
          "我希望图标能轻易修改颜色，暗色模式很需要这一点，我不想像公司里那样用两套图标，所以我的 svg 图标都是在 <span> 标签中 用 background-image: url('...'); 引入的",
          "于是那个元素不显示的时候它就不会加载，网速快无所谓，但网速慢体验极差"
        ]
      },
      {
        "name": "实现：",
        "info": [
          "首先 vite 导入：import.meta.glob('../assets/img/icon/*.svg')",
          "再把导入的对象解构到数组 list 直接拿去模板里遍历",
          "哦豁！模板中 img 的 src 无法被正确解析",
          "那就用url构造器 new URL(list[i], import.meta.url).href",
          "将得到一个url（字符串）：http://localhost:5173/src/assets/img/icon/chevron-back.svg",
          "再丢到模板里用，但由于是背景图片，我得丢 css里：:style=\"{ 'background-image': `url(${item})`}\"",
          "然后在模板里把这一坨给他绝对定位丢到外太空去藏着，偷偷加载",
          "然后十秒钟后噶掉它，省的添麻烦",
          "贴个码",
          "let need_preload = ref(true); let icon_list = reactive([]); const preloadIcon = async () => { await nextTick(); const list = Object.keys(import.meta.glob('../assets/img/icon/*.svg')); for (let i = 0; i < list.length; i++) { icon_list.push(new URL(list[i], import.meta.url).href); }; setTimeout(() => { need_preload.value = false; }, 1e4); }; preloadIcon()"
        ]
      },
      "更新 README.md"
    ]
  },
  {
    "date": "2024.3.20",
    "content": [
      "哦豁，楼上预加载到线上环境就嘎了",
      "使用 css 中 url 引入的，浏览器在渲染页面时通常会按需加载它们",
      "直接复制 svg 代码到模板里才是最优解，除了 log.vue 里的其他都改了，这里头的影响很小啦",
      "3.16 的我像个小丑🤡🤡🤡"
    ]
  }
]